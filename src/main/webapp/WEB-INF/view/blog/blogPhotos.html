<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8" />
<title>我的相册 - 博客后台 - 林区</title>

<!-- bootstrap -->
<link rel="stylesheet" href="bootstrap/css/bootstrap.css" />

<!-- 第三方 -->
<link rel="stylesheet" href="css/popup/popup.css" />
<!-- 文件上传 -->
<link rel="stylesheet" href="css/fileinput/fileinput.css" />

<!-- 博客后管通用 -->
<link href="css/blog/blogPublic.css" rel="stylesheet" />

<!-- 本页面所属 -->
<link rel="stylesheet" href="css/blog/blogPhotos.css" />

<!-- logo -->
<link rel="icon" href="img/favicon.ico" type="image/x-icon">

</head>

<body>
	<!-- 头部 -->
	<div id="top_nav">
		<div id="left">
			« <a href="#" id="goPortal">网站首页</a> <a href="#" id="goUserInfo">我的园子</a>
			<a href="#" id="goLooking">找一找</a>
		</div>
		<div id="right"></div>
		<div class="clear"></div>
	</div>

	<!-- 主体 -->
	<div id="main">
		<!-- 主体头部 -->
		<div id="main_head">
			<div id="blog_title">
				<a href="#" id="headNick"></a>
			</div>
			<div id="SiteTitle">
				<a href="#" id="headLogo"><img alt="logo" src="img/logo.png"
					height="50" /></a>
			</div>
		</div>
		<div class="clear"></div>

		<!-- 主体身体 -->
		<div id="main_body">
			<div id="main_wrap">
				<div id="main_container">
					<!-- 主体上部菜单栏 -->
					<div id="tab_nav">
						<ul>
							<li><a id="blogManage" href="#">博客</a></li>
							<li><a id="blogPhoto" href="#" class="current_nav">相册</a></li>
							<li><a id="blogFile" href="#">文件</a></li>
							<li><a id="blogSetting" href="#">设置</a></li>
						</ul>
						<div class="clear"></div>
					</div>
					<div id="sub_nav"></div>

					<!-- 主体内容 -->
					<div id="content_area">
						<div class="container">
							<div class="row"
								style="text-align: center; border-bottom: 1px dashed #ccc; padding: 0 0 20px 0; margin-bottom: 40px;">
								<h3 id="master"></h3>
							</div>

							<ul class="row" id="photos">
								<!-- <li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-174908-rocking-the-night-away-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-287182-blah-blah-blah-yellow-road-sign-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-460760-colors-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-461673-retro-party-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-514834-touchscreen-technology-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-916206-legal-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-1062948-nature-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-1471528-insant-camera-kid-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-2255072-relaxed-man-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-2360379-colors-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-2360571-jump-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-2361384-culture-for-business-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-2441670-spaghetti-with-tuna-fish-and-parsley-s.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-2943363-budget-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-3444921-street-art-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-3552322-insurance-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-3807845-food-s.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-3835655-down-office-worker-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-4619216-ui-control-knob-regulators-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-5771958-health-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-268693-businesswoman-using-laptop-outdoors-xs.jpg">
								</li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-352207-search-of-code-s.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-247190-secret-email-xs.jpg"></li>
								<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4"><img
									class="img-responsive"
									src="images/photodune-682990-online-search-xs.jpg"></li> -->
							</ul>
						</div>
						<div class="clear"></div>
						<div style="padding-left: 30px;">
							<button type="button" class="btn btn-success" id="addPhoto"
								data-toggle="modal" data-target="#myModal2">添加照片</button>
						</div>
					</div>
				</div>
			</div>

			<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
				aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-body"></div>
					</div>
				</div>
			</div>

			<!-- Modal -->
			<div class="modal fade" id="myModal2" tabindex="-1" role="dialog"
				aria-labelledby="myModalLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<!--主体-->
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">
								<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
							</button>
							<h4 class="modal-title" id="myModalLabel">添加照片</h4>
						</div>
						<!-- 主体-->
						<div class="modal-body" style="overflow: hidden;">
							<div class="form-group">
								<label class="col-sm-3 control-label"
									style="margin-top: 7px; font-size: 14px;">请选择图片：</label>
								<div class="col-sm-9">
									<input id="myfile" name="myfile" type="file" multiple="multiple"
										data-show-caption="true">
									<p class="help-block">支持jpg、jpeg、png格式，大小不超过2.0M</p>
								</div>
							</div>
						</div>
						<!--脚注 -->
						<div class="modal-footer">
							<button type="button" class="btn btn-default"
								data-dismiss="modal">关闭</button>
							<!-- <button type="button" class="btn btn-primary">上传</button> -->
						</div>
					</div>
				</div>
			</div>

			<!-- 主体左侧菜单栏 -->
			<div id="left_container">
				<div id="left_nav">
					<h2>操作</h2>
				</div>
				<div id="sidebar_categories"></div>
			</div>

			<div class="clear"></div>
		</div>
	</div>

	<!-- 脚部 -->
	<div id="footer">
		<a>©2017 小叶子</a>
	</div>

	<!-- jquery,bootstrap -->
	<script type="text/javascript" src="js/jquery.js"></script>
	<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
	<script type="text/javascript" src="js/jquery.tmpl.js"></script>

	<!-- 第三方 -->
	<script type="text/javascript" src="js/popup/popup.js"></script>
	<!-- 相册插件 -->
	<script type="text/javascript" src="js/photos/photo-gallery.js"></script>
	<!-- 文件上传 -->
	<script type="text/javascript" src="js/fileinput/fileinput.js"></script>
	<script type="text/javascript" src="js/fileinput/zh.js"></script>

	<!-- 博客后管通用 -->
	<script type="text/javascript" src="js/blog/blogPublic.js"></script>

	<script type="text/x-jquery-tmpl" id="t1">
				<li class="col-lg-2 col-md-2 col-sm-3 col-xs-4">
					<img class="img-responsive" src="http://106.15.229.200:8010/${filename}.${filestyle}">
				</li>
	</script>
	

	<!-- 本页面所属 -->
	<script type="text/javascript">
		/*上传照片逻辑*/
		//上传
		$("#myfile").fileinput({
			language : 'zh', //设置语言
			uploadUrl : "uploadPhoto", //上传的地址
			allowedFileExtensions : [ 'jpg', 'gif', 'png' ],//接收的文件后缀
			//uploadExtraData:{"id": 1, "fileName":'123.mp3'},
			uploadAsync : true, //默认异步上传
			showUpload : false, //是否显示上传按钮
			showRemove : false, //显示移除按钮
			showPreview : true, //是否显示预览
			showCaption : false,//是否显示标题
			browseClass : "btn btn-primary", //按钮样式     
			dropZoneEnabled : false,//是否显示拖拽区域
			//minImageWidth: 50, //图片的最小宽度
			//minImageHeight: 50,//图片的最小高度
			//maxImageWidth: 1000,//图片的最大宽度
			//maxImageHeight: 1000,//图片的最大高度
			maxFileSize : 2048,//单位为kb，如果为0表示不限制文件大小
			//minFileCount: 0,
			maxFileCount : 1, //表示允许同时上传的最大文件个数
			enctype : 'multipart/form-data',
			validateInitialCount : true,
			previewFileIcon : "<i class='glyphicon glyphicon-king'></i>",
			msgFilesTooMany : "选择上传的文件数量({n}) 超过允许的最大数值{m}！",
		});

		//上传出错反馈
		$('#myfile').on('fileerror', function(event, data, msg) {
			jqalert({
				title: '提示弹窗',
				cont: '上传出错'
			});
		});
		
		//上传成功结果反馈
		$("#myfile").on("fileuploaded",
				function(event, data, previewId, index) {
					console.log(data.response);
					window.location.reload();
				});
		
		
		/*获取图片逻辑*/
		$(function(){
			$.ajax({
				type : "get",
				url : "getAllPhotos",
				dataType : "json",
				data : {
				},
				async : true,
				success : function(data) {
					console.log(data);
					$("#t1").tmpl(data).appendTo("#photos");
				},
				error : function() {
					alert("数据获取失败");
				}
			});
			a = setTimeout(function() {
				console.log(nickname);
				$("#master").text(nickname+"的个人相册");
			}, 100);
		});
		
	</script>

</body>

</html>